<!DOCTYPE project>
<project basedir="." default="less" name="lesscss">
	<property name="dir.less" value="${basedir}/WebContent/less" />
	<property name="lessc" value="/usr/local/bin/lessc" />
	<property name="dir.css" value="${basedir}/WebContent/styles" />
	<property name="pathToNode" value="/usr/local/bin" />

	<target name="checkOs">
		<condition property="isWindows">
			<os family="windows" />
		</condition>

		<condition property="isLinux">
			<or>
				<os family="unix" />
				<os family="mac" />
			</or>
		</condition>
	</target>

	<target name="less" depends="checkOs">
		<antcall target="lessLinux" />
		<antcall target="lessWindows" />
	</target>

	<target name="lessLinux" depends="checkOs" if="isLinux">
		<echo>In Linux</echo>
		<apply executable="${lessc}" dest="${dir.css}">
			<env key="PATH" value="${env.PATH}:${pathToNode}" />
			<fileset dir="${dir.less}" includes="*.less" />
			<srcfile />
			<targetfile />
			<mapper type="glob" from="*.less" to="*.css" />
		</apply>
	</target>

	<target name="lessWindows" depends="checkOs" if="isWindows">
		<echo>In Windows</echo>
		<apply executable="${lessc}" dest="${dir.css}">
			<fileset dir="${dir.less}" includes="*.less" />
			<srcfile />
			<targetfile />
			<mapper type="glob" from="*.less" to="*.css" />
		</apply>
	</target>
</project>